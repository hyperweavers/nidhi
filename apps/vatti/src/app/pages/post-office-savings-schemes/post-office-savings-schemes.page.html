<div class="p-4 text-gray-500 dark:text-gray-400">
  <h2
    class="m-4 mt-0 text-center text-2xl font-semibold text-gray-900 sm:mb-10 sm:mt-4 dark:text-white"
  >
    Post Office Savings Schemes
  </h2>

  <form (ngSubmit)="calculateMaturityAmount()" class="mt-4">
    <section class="mb-6 grid grid-cols-1 md:grid-cols-2 md:gap-10">
      <main>
        <!-- Deposit Amount -->
        <div class="mb-6">
          <label
            for="deposit-amount"
            class="mb-2 block text-sm font-medium text-gray-900 dark:text-white"
            >Deposit Amount</label
          >
          <input
            type="number"
            id="deposit-amount"
            name="depositAmount"
            [(ngModel)]="depositAmount"
            (change)="calculateMaturityAmount()"
            class="focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"
            placeholder=""
            required
          />
        </div>

        <!-- Investment Start Date -->
        <div class="mb-6">
          <label
            for="investment-start-date"
            class="mb-2 block text-sm font-medium text-gray-900 dark:text-white"
            >Deposit Start Date</label
          >
          <div class="relative">
            <div
              class="pointer-events-none absolute inset-y-0 start-0 flex items-center ps-3.5"
            >
              <svg
                class="h-4 w-4 text-gray-500 dark:text-gray-400"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"
                />
              </svg>
            </div>
            <input
              #investmentStartDateInput
              type="text"
              id="investment-start-date"
              name="investmentStartDate"
              [ngModel]="investmentStartDate | date : 'dd/MM/yyyy'"
              (ngModelChange)="onInvestmentStartDateChange($event)"
              class="focus:ring-primary-600 focus:border-primary-600 dark:focus:ring-primary-500 dark:focus:border-primary-500 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 ps-10 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"
              placeholder="DD/MM/YYYY"
              required
              readonly
            />
          </div>
        </div>
      </main>

      <aside>
        <div class="mt-6">
          <!-- Senior Citizen -->
          <div class="mb-6 flex items-center">
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              >Are you a senior citizen?
            </label>

            <div class="flex-1 ps-1">
              <div
                data-tooltip-target="tooltip-senior-citizen"
                class="w-4 cursor-pointer"
              >
                <svg
                  class="h-4 w-4 text-gray-800 dark:text-white"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    fill-rule="evenodd"
                    d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.408-5.5a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2h-.01ZM10 10a1 1 0 1 0 0 2h1v3h-1a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2h-1v-4a1 1 0 0 0-1-1h-2Z"
                    clip-rule="evenodd"
                  />
                </svg>
              </div>

              <div
                id="tooltip-senior-citizen"
                role="tooltip"
                class="tooltip invisible absolute z-50 inline-block rounded-lg bg-yellow-400 px-3 py-2 text-sm font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-yellow-500"
              >
                <ul class="list-inside list-disc space-y-1">
                  <li>General public (with age 60 years or above)</li>
                  <li>
                    Retired civilian staff (with age between 55 and 60 years)
                  </li>
                  <li>
                    Retired defense staff (with age between 50 and 60 years)
                  </li>
                </ul>
                <div class="tooltip-arrow" data-popper-arrow></div>
              </div>
            </div>

            <div class="ms-4 flex">
              <div class="me-4 flex items-center">
                <input
                  id="floating"
                  type="radio"
                  name="eligible-for-scss"
                  [(ngModel)]="eligibleForScss"
                  [value]="true"
                  (change)="onEligibleForScssChange(true)"
                  class="text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600 h-4 w-4 border-gray-300 bg-gray-100 focus:ring-2 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800"
                />
                <label
                  for="floating"
                  class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >Yes</label
                >
              </div>
              <div class="flex items-center">
                <input
                  id="fixed"
                  type="radio"
                  name="eligible-for-scss"
                  [(ngModel)]="eligibleForScss"
                  [value]="false"
                  (change)="onEligibleForScssChange(false)"
                  class="text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600 h-4 w-4 border-gray-300 bg-gray-100 focus:ring-2 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800"
                />
                <label
                  for="fixed"
                  class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >No</label
                >
              </div>
            </div>
          </div>

          <!-- Woman -->
          <div class="mb-6 flex">
            <label
              class="block flex-1 text-sm font-medium text-gray-900 dark:text-white"
              >Are you a women?</label
            >
            <div class="ms-4 flex">
              <div class="me-4 flex items-center">
                <input
                  id="floating"
                  type="radio"
                  name="eligible-for-mssc"
                  [(ngModel)]="eligibleForMssc"
                  [value]="true"
                  (change)="onEligibleForMsscChange(true)"
                  class="text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600 h-4 w-4 border-gray-300 bg-gray-100 focus:ring-2 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800"
                />
                <label
                  for="floating"
                  class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >Yes</label
                >
              </div>
              <div class="flex items-center">
                <input
                  id="fixed"
                  type="radio"
                  name="eligible-for-mssc"
                  [(ngModel)]="eligibleForMssc"
                  [value]="false"
                  (change)="onEligibleForMsscChange(false)"
                  class="text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600 h-4 w-4 border-gray-300 bg-gray-100 focus:ring-2 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800"
                />
                <label
                  for="fixed"
                  class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >No</label
                >
              </div>
            </div>
          </div>

          <!-- Girl Child -->
          <div class="mb-6 flex">
            <label
              class="block flex-1 text-sm font-medium text-gray-900 dark:text-white"
              >Do you have a girl child below the age of 10 years?</label
            >
            <div class="ms-4 flex">
              <div class="me-4 flex items-center">
                <input
                  id="floating"
                  type="radio"
                  name="eligible-for-ssa"
                  [(ngModel)]="eligibleForSsa"
                  [value]="true"
                  (change)="onEligibleForSsaChange(true)"
                  class="text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600 h-4 w-4 border-gray-300 bg-gray-100 focus:ring-2 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800"
                />
                <label
                  for="floating"
                  class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >Yes</label
                >
              </div>
              <div class="flex items-center">
                <input
                  id="fixed"
                  type="radio"
                  name="eligible-for-ssa"
                  [(ngModel)]="eligibleForSsa"
                  [value]="false"
                  (change)="onEligibleForSsaChange(false)"
                  class="text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600 h-4 w-4 border-gray-300 bg-gray-100 focus:ring-2 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800"
                />
                <label
                  for="fixed"
                  class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"
                  >No</label
                >
              </div>
            </div>
          </div>
        </div>
      </aside>
    </section>

    <div class="flex w-full justify-center md:mt-0">
      <button
        type="submit"
        class="bg-primary-700 hover:bg-primary-800 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800 w-full rounded-lg px-5 py-2.5 text-center text-sm font-medium text-white focus:outline-none focus:ring-4 sm:w-auto"
      >
        Calculate
      </button>
    </div>
  </form>

  @if (schemesWithReturns.length > 0) {
  <div class="mt-10">
    <!-- Tabs Select -->
    <div class="mt-6 flex items-center sm:hidden">
      <label
        for="tabs"
        class="me-2 text-xl font-bold text-gray-900 dark:text-white"
        >View</label
      >
      <select
        id="tabs"
        [ngModel]="activeTab"
        (ngModelChange)="onTabChange($event)"
        class="flex-1 rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"
      >
        <option [value]="Tabs.EARNING_COMPARISON">Earning Comparison</option>
        <option [value]="Tabs.SCHEME_COMPARISON">Scheme Comparison</option>
      </select>
    </div>

    <!-- Tabs -->
    <ul
      class="mt-6 hidden flex-wrap border-b border-gray-200 text-center text-sm font-medium text-gray-500 sm:flex dark:border-gray-700 dark:text-gray-400"
    >
      <li class="me-2" (click)="activeTab = Tabs.EARNING_COMPARISON">
        <p
          class="inline-block cursor-pointer rounded-t-lg p-4"
          [class.active]="activeTab === Tabs.EARNING_COMPARISON"
        >
          Earning Comparison
        </p>
      </li>
      <li class="me-2" (click)="activeTab = Tabs.SCHEME_COMPARISON">
        <p
          class="inline-block cursor-pointer rounded-t-lg p-4"
          [class.active]="activeTab === Tabs.SCHEME_COMPARISON"
        >
          Scheme Comparison
        </p>
      </li>
    </ul>
  </div>

  @if (activeTab === Tabs.EARNING_COMPARISON) {
  <section class="mt-4">
    <div class="relative overflow-x-auto rounded-lg">
      <table
        class="w-full text-left text-sm text-gray-500 rtl:text-right dark:text-gray-400"
      >
        <thead
          class="bg-gray-50 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400"
        >
          <tr>
            <th scope="col" class="min-w-36 p-2 py-3 text-center sm:p-4">
              Scheme
            </th>
            <th scope="col" class="p-2 py-3 text-center sm:p-4">Principal</th>
            <th scope="col" class="p-2 py-3 text-center sm:p-4">Interest</th>
            <th scope="col" class="p-2 py-3 text-center sm:p-4">
              Maturity Amount
            </th>
            <th
              scope="col"
              class="whitespace-nowrap p-2 py-3 text-center sm:p-4"
            >
              Maturity Date
            </th>
          </tr>
        </thead>
        <tbody>
          @for (scheme of schemesWithReturns; track (scheme.title + '_' +
          scheme.tenure)) {
          <tr class="border-b bg-white dark:border-gray-700 dark:bg-gray-800">
            <td scope="col" class="min-w-36 p-2 py-3 sm:p-4">
              {{ scheme.title === PostOfficeSavingsSchemeTitle.TD ?
              (scheme.title + " (" + scheme.tenure + " Year)") : scheme.title }}
            </td>
            <td scope="col" class="p-2 py-3 text-center sm:p-4">
              {{ scheme.returns.principal | number: '1.0-0' }}
            </td>
            <td scope="col" class="p-2 py-3 text-center sm:p-4">
              {{ scheme.returns.interest | number: '1.0-0' }}
            </td>
            <td scope="col" class="p-2 py-3 text-center sm:p-4">
              {{ scheme.returns.maturity | number: '1.0-0' }}
            </td>
            <td
              scope="col"
              class="whitespace-nowrap p-2 py-3 text-center sm:p-4"
            >
              {{ scheme.maturityDate | date: 'mediumDate' }}
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </section>
  } @if (activeTab === Tabs.SCHEME_COMPARISON) {
  <section class="mt-4">
    <div class="relative overflow-x-auto rounded-lg">
      <table
        class="w-full text-left text-sm text-gray-500 rtl:text-right dark:text-gray-400"
      >
        <thead
          class="bg-gray-50 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400"
        >
          <tr>
            <th scope="col" class="min-w-36 p-2 py-3 text-center sm:p-4">
              Scheme
            </th>
            <th scope="col" class="p-2 py-3 text-center sm:p-4">
              Interest Rate
            </th>
            <th
              scope="col"
              class="flex items-center p-2 py-3 text-center sm:p-4"
            >
              <div>Effective Yield</div>
              <div class="relative z-40">
                <div
                  data-tooltip-target="tooltip-effective-yield"
                  class="cursor-pointer"
                >
                  <svg
                    class="h-4 w-4 text-gray-800 dark:text-white"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.408-5.5a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2h-.01ZM10 10a1 1 0 1 0 0 2h1v3h-1a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2h-1v-4a1 1 0 0 0-1-1h-2Z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </div>

                <div
                  id="tooltip-effective-yield"
                  role="tooltip"
                  class="tooltip invisible absolute z-50 inline-block rounded-lg bg-yellow-400 px-3 py-2 text-sm font-medium capitalize text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-yellow-500"
                >
                  Simple interest rate that would yield the same total interest
                  over the same time period.
                  <div class="tooltip-arrow" data-popper-arrow></div>
                </div>
              </div>
            </th>
            <th scope="col" class="p-2 py-3 text-center sm:p-4">Tenure</th>
            <th scope="col" class="p-2 py-3 text-center sm:p-4">
              Interest Type
            </th>
            <th scope="col" class="p-2 py-3 text-center sm:p-4">
              Compounding Frequency
            </th>
          </tr>
        </thead>
        <tbody>
          @for (scheme of schemesWithReturns; track (scheme.title + '_' +
          scheme.tenure)) {
          <tr class="border-b bg-white dark:border-gray-700 dark:bg-gray-800">
            <td scope="col" class="min-w-36 p-2 py-3 sm:p-4">
              {{ scheme.title === PostOfficeSavingsSchemeTitle.TD ?
              (scheme.title + " (" + scheme.tenure + " Year)") : scheme.title }}
            </td>
            <td scope="col" class="p-2 py-3 text-center sm:p-4">
              {{ scheme.interestRate | number: '1.2-2' }}%
            </td>
            <td scope="col" class="p-2 py-3 text-center sm:p-4">
              {{ scheme.effectiveYield | number: '1.2-2' }}%
            </td>
            <td scope="col" class="p-2 py-3 text-center sm:p-4">
              {{ scheme.title === PostOfficeSavingsSchemeTitle.KVP ?
              (((scheme.tenure - 0.5) | number: '1.0-0') + ' Years ' +
              (((scheme.tenure * 12) % 12) | number: '1.0-0') + ' Months') :
              (scheme.tenure + ' Years') }}
            </td>
            <td scope="col" class="p-2 py-3 text-center sm:p-4">
              {{ scheme.compounding ? 'Compound' : 'Simple' }}
            </td>
            <td scope="col" class="p-2 py-3 text-center sm:p-4">
              {{ scheme.compounding ? scheme.compoundingFrequency : 'N/A' }}
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </section>
  } }
</div>
