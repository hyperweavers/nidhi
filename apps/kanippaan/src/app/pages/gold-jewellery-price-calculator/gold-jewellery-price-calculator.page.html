<div class="p-4 text-gray-500 dark:text-gray-400">
  <h2
    class="m-4 mt-0 text-center text-2xl font-semibold text-gray-900 sm:mb-10 sm:mt-4 dark:text-white"
  >
    Gold Jewellery Price Calculator
  </h2>

  <form (ngSubmit)="calculateTotalPrice()" class="mt-4">
    <section class="grid grid-cols-1 md:grid-cols-2 md:gap-10">
      <main>
        <!-- Gold Weight Input -->
        <div class="mb-6">
          <label
            for="gold-weight"
            class="mb-2 block text-sm font-medium text-gray-900 dark:text-white"
            >Gold Weight (grams)</label
          >
          <input
            type="number"
            id="gold-weight"
            [(ngModel)]="goldWeight"
            (change)="calculateTotalPrice()"
            name="gold-weight"
            class="focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"
            placeholder=""
            required
          />
        </div>

        <!-- Wastage Percentage -->
        <div class="mb-6">
          <label
            for="wastage"
            class="mb-2 block text-sm font-medium text-gray-900 dark:text-white"
            >Wastage/Value Addition (%)</label
          >
          <input
            type="number"
            id="wastage"
            [(ngModel)]="wastagePercentage"
            (change)="calculateTotalPrice()"
            name="wastage"
            class="focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"
            placeholder=""
            required
          />
        </div>

        <!-- Making Charge -->
        <div class="mb-6">
          <label
            for="making-charge"
            class="mb-2 block text-sm font-medium text-gray-900 dark:text-white"
            >Making Charge (&#8377;)</label
          >
          <input
            type="number"
            id="making-charge"
            [(ngModel)]="makingCharge"
            (change)="calculateTotalPrice()"
            name="making-charge"
            class="focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"
            placeholder=""
            required
          />
        </div>

        <!-- Gold Price Per Gram -->
        <div class="mb-6">
          <div class="mb-2 flex items-center">
            <label
              for="gold-price-per-gram"
              class="block text-sm font-medium text-gray-900 dark:text-white"
              >Gold Price (1 gram)
            </label>
            <span data-tooltip-target="tooltip-info" class="cursor-pointer ps-1"
              ><svg
                class="h-4 w-4 text-gray-800 dark:text-white"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  fill-rule="evenodd"
                  d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.408-5.5a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2h-.01ZM10 10a1 1 0 1 0 0 2h1v3h-1a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2h-1v-4a1 1 0 0 0-1-1h-2Z"
                  clip-rule="evenodd"
                />
              </svg>
            </span>

            <div
              id="tooltip-info"
              role="tooltip"
              class="tooltip invisible absolute z-50 inline-block rounded-lg bg-yellow-400 px-3 py-2 text-sm font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-yellow-500"
            >
              Auto-populated with today's online gold price.<br />Please confirm
              with the seller.
              <div class="tooltip-arrow" data-popper-arrow></div>
            </div>
          </div>
          <input
            type="number"
            id="gold-price-per-gram"
            [(ngModel)]="goldPricePerGram"
            (change)="calculateTotalPrice()"
            name="gold-price-per-gram"
            class="focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"
            placeholder=""
            required
          />
        </div>

        <!-- Calculate Button -->
        <div class="flex w-full justify-center">
          <button
            type="submit"
            class="bg-primary-700 hover:bg-primary-800 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800 w-full rounded-lg px-5 py-2.5 text-center text-sm font-medium text-white focus:outline-none focus:ring-4 sm:w-auto"
          >
            Calculate
          </button>
        </div>
      </main>

      <aside>
        @if (totalAmountPayable > 0) {
        <div class="mt-6">
          <div class="grid grid-cols-3 items-center gap-x-10 gap-y-2">
            <p
              class="col-span-2 leading-none tracking-tight text-gray-800 dark:text-gray-300"
            >
              Gold Price
            </p>
            <p class="text-right font-bold text-black dark:text-white">
              {{ goldPrice | number : '1.0-0' }}
            </p>

            <p
              class="col-span-2 leading-none tracking-tight text-gray-800 dark:text-gray-300"
            >
              Wastage/Value Addition (W/VA)
            </p>
            <p class="text-right font-bold text-black dark:text-white">
              {{ wastageValue | number : '1.0-0' }}
            </p>
            <p
              class="col-span-2 leading-none tracking-tight text-gray-800 dark:text-gray-300"
            >
              Making Charge (MC)
            </p>
            <p class="text-right font-bold text-black dark:text-white">
              {{ makingCharge | number : '1.0-0' }}
            </p>
            <p
              class="col-span-2 leading-none tracking-tight text-gray-800 dark:text-gray-300"
            >
              Tax
            </p>
            <p class="text-right font-bold text-black dark:text-white">
              {{ tax | number : '1.0-0' }}
            </p>
          </div>

          <h3
            class="mt-6 text-center text-xl font-bold leading-none tracking-tight text-gray-900 dark:text-white"
          >
            Total =
            <mark
              class="rounded bg-blue-600 px-2 py-1 text-2xl font-extrabold text-white dark:bg-blue-500"
              >{{ totalAmountPayable | number : '1.0-0' }}</mark
            >
          </h3>

          <!-- Doughnut Chart -->
          <section
            class="mt-6 w-full rounded-lg bg-white p-4 shadow md:p-6 dark:bg-gray-800"
          >
            <h2
              class="mb-4 block text-center text-sm font-medium text-gray-900 dark:text-white"
            >
              Jewel Price Breakdown
            </h2>
            <div class="relative mt-10">
              <div
                class="absolute -top-5 left-0 flex h-full w-full flex-col items-center justify-center"
              >
                <div class="text-2xl font-bold text-black dark:text-white">
                  {{ totalAmountPayable | number:'1.0-0' }}
                </div>
                <div>Total</div>
              </div>
              <div class="relative h-80 w-full">
                <canvas
                  baseChart
                  [type]="ChartType.DOUGHNUT"
                  [data]="priceBreakdownChartData"
                  [options]="priceBreakdownChartOptions"
                ></canvas>
              </div>
            </div>
          </section>
        </div>
        }
      </aside>
    </section>
  </form>
</div>
